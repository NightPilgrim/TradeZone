<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TradeZone</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
    (function(){
    var LZString=function(){var r=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",e={};function t(r,o){if(!e[r]){e[r]={};for(var n=0;n<r.length;n++)e[r][r.charAt(n)]=n}return e[r][o]}var i={compressToBase64:function(r){if(null==r)return"";var n=i._compress(r,6,function(r){return o.charAt(r)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(r){return null==r?"":""==r?null:i._decompress(r.length,32,function(n){return t(o,r.charAt(n))})},compressToUTF16:function(o){return null==o?"":i._compress(o,15,function(o){return r(o+32)})+" "},decompressFromUTF16:function(r){return null==r?"":""==r?null:i._decompress(r.length,16384,function(o){return r.charCodeAt(o)-32})},compressToUint8Array:function(r){for(var o=i.compress(r),n=new Uint8Array(2*o.length),e=0,t=o.length;e<t;e++){var s=o.charCodeAt(e);n[2*e]=s>>>8,n[2*e+1]=s%256}return n},decompressFromUint8Array:function(o){if(null==o)return i.decompress(o);for(var n=new Array(o.length/2),e=0,t=n.length;e<t;e++)n[e]=256*o[2*e]+o[2*e+1];var s=[];return n.forEach(function(o){s.push(r(o))}),i.decompress(s.join(""))},compressToEncodedURIComponent:function(r){return null==r?"":i._compress(r,6,function(r){return n.charAt(r)})},decompressFromEncodedURIComponent:function(r){return null==r?"":""==r?null:(r=r.replace(/ /g,"+"),i._decompress(r.length,32,function(o){return t(n,r.charAt(o))}))},compress:function(o){return i._compress(o,16,function(o){return r(o)})},_compress:function(r,o,n){if(null==r)return"";var e,t,i,s={},u={},a="",p="",c="",l=2,f=3,h=2,d=[],m=0,v=0;for(i=0;i<r.length;i+=1)if(a=r.charAt(i),Object.prototype.hasOwnProperty.call(s,a)||(s[a]=f++,u[a]=!0),p=c+a,Object.prototype.hasOwnProperty.call(s,p))c=p;else{if(Object.prototype.hasOwnProperty.call(u,c)){if(c.charCodeAt(0)<256){for(e=0;e<h;e++)m<<=1,v==o-1?(v=0,d.push(n(m)),m=0):v++;for(t=c.charCodeAt(0),e=0;e<8;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}else{for(t=1,e=0;e<h;e++)m=m<<1|t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t=0;for(t=c.charCodeAt(0),e=0;e<16;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}0==--l&&(l=Math.pow(2,h),h++),delete u[c]}else for(t=s[c],e=0;e<h;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;0==--l&&(l=Math.pow(2,h),h++),s[p]=f++,c=String(a)}if(""!==c){if(Object.prototype.hasOwnProperty.call(u,c)){if(c.charCodeAt(0)<256){for(e=0;e<h;e++)m<<=1,v==o-1?(v=0,d.push(n(m)),m=0):v++;for(t=c.charCodeAt(0),e=0;e<8;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}else{for(t=1,e=0;e<h;e++)m=m<<1|t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t=0;for(t=c.charCodeAt(0),e=0;e<16;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}0==--l&&(l=Math.pow(2,h),h++),delete u[c]}else for(t=s[c],e=0;e<h;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;0==--l&&(l=Math.pow(2,h),h++)}for(t=2,e=0;e<h;e++)m=m<<1|1&t,v==o-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;for(;;){if(m<<=1,v==o-1){d.push(n(m));break}v++}return d.join("")},decompress:function(r){return null==r?"":""==r?null:i._decompress(r.length,32768,function(o){return r.charCodeAt(o)})},_decompress:function(o,n,e){var t,i,s,u,a,p,c,l=[],f=4,h=4,d=3,m="",v=[],g={val:e(0),position:n,index:1};for(t=0;t<3;t+=1)l[t]=t;for(s=0,a=Math.pow(2,2),p=1;p!=a;)u=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=e(g.index++)),s|=(u>0?1:0)*p,p<<=1;switch(s){case 0:for(s=0,a=Math.pow(2,8),p=1;p!=a;)u=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=e(g.index++)),s|=(u>0?1:0)*p,p<<=1;c=r(s);break;case 1:for(s=0,a=Math.pow(2,16),p=1;p!=a;)u=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=e(g.index++)),s|=(u>0?1:0)*p,p<<=1;c=r(s);break;case 2:return""}for(l[3]=c,i=c,v.push(c);;){if(g.index>o)return"";for(s=0,a=Math.pow(2,d),p=1;p!=a;)u=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=e(g.index++)),s|=(u>0?1:0)*p,p<<=1;switch(c=s){case 0:for(s=0,a=Math.pow(2,8),p=1;p!=a;)u=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=e(g.index++)),s|=(u>0?1:0)*p,p<<=1;l[h++]=r(s),c=h-1,f--;break;case 1:for(s=0,a=Math.pow(2,16),p=1;p!=a;)u=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=e(g.index++)),s|=(u>0?1:0)*p,p<<=1;l[h++]=r(s),c=h-1,f--;break;case 2:return v.join("")}if(0==f&&(f=Math.pow(2,d),d++),l[c])m=l[c];else{if(c!==h)return null;m=i+i.charAt(0)}v.push(m),l[h++]=i+m.charAt(0),i=m,0==--f&&(f=Math.pow(2,d),d++)}}};return i}();
    window.LZString = LZString;
    })();
    </script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app" class="app">
        <header class="header">
            <h1 class="header-title">üìä Trade<span class="title-z">Z</span>one</h1>
            <div class="header-stats-wrap">
                <div class="header-stats">
                    <span id="balance-pct" class="balance-pct">0%</span>
                    <span id="balance-points" class="balance-points">0 –ø—Ç</span>
                </div>
            </div>
            <div class="deposit-block">
                <span class="deposit-label">–î–µ–ø–æ–∑–∏—Ç—ã</span>
                <div class="deposit-row deposit-row-header">
                    <input type="number" id="deposit-input" class="input deposit-input" placeholder="–°—É–º–º–∞" step="0.01" min="0" inputmode="decimal">
                    <button type="button" id="set-deposit-btn" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
                <div id="deposits-history-wrap" class="deposits-history-wrap collapsed">
                    <div class="deposits-history-header" id="deposits-history-toggle">
                        <span class="deposits-history-toggle-icon">‚ñ∂</span>
                        <span class="deposits-history-label">–ò—Å—Ç–æ—Ä–∏—è –¥–µ–ø–æ–∑–∏—Ç–æ–≤</span>
                        <span class="deposits-history-count" id="deposits-count">(0)</span>
                    </div>
                    <div class="deposits-history-body">
                        <div id="deposits-list" class="deposits-list"></div>
                    </div>
                </div>
            </div>
        </header>

        <main class="main">
            <!-- –ë–∞–ª–∞–Ω—Å -->
            <section class="section balance-section">
                <h2 class="section-title">–ë–∞–ª–∞–Ω—Å</h2>
                <div class="balance-display">
                    <span id="balance-value" class="balance-value">0</span>
                </div>
            </section>

            <!-- –ì—Ä–∞—Ñ–∏–∫ -->
            <section class="section chart-section">
                <h2 class="section-title">–ì—Ä–∞—Ñ–∏–∫ –±–∞–ª–∞–Ω—Å–∞</h2>
                <div class="chart-wrap">
                    <canvas id="balance-chart" aria-label="–ì—Ä–∞—Ñ–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞"></canvas>
                </div>
            </section>

            <!-- –°–¥–µ–ª–∫–∏ -->
            <section class="section trades-section">
                <div class="section-header">
                    <h2 class="section-title">–°–¥–µ–ª–∫–∏</h2>
                    <div class="trades-actions">
                        <select id="filter-asset" class="select filter-select" title="–§–∏–ª—å—Ç—Ä –ø–æ –∞–∫—Ç–∏–≤—É">
                            <option value="">–í—Å–µ –∞–∫—Ç–∏–≤—ã</option>
                            <option value="BTC/USD">BTC/USD</option>
                            <option value="ETH/USD">ETH/USD</option>
                            <option value="EUR/USD">EUR/USD</option>
                            <option value="Gold">Gold</option>
                        </select>
                        <button type="button" id="add-trade-btn" class="btn btn-primary btn-icon" title="–î–æ–±–∞–≤–∏—Ç—å —Å–¥–µ–ª–∫—É">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                            –î–æ–±–∞–≤–∏—Ç—å —Å–¥–µ–ª–∫—É
                        </button>
                    </div>
                </div>

                <div id="trades-list" class="trades-list">
                    <!-- –°–¥–µ–ª–∫–∏ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                </div>

                <div class="bottom-actions">
                    <button type="button" id="export-json-btn" class="btn btn-secondary">–≠–∫—Å–ø–æ—Ä—Ç –≤ JSON</button>
                    <button type="button" id="share-result-btn" class="btn btn-primary">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º</button>
                    <button type="button" id="clear-history-btn" class="btn btn-secondary">–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å–¥–µ–ª–æ–∫</button>
                    <button type="button" id="clear-all-btn" class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</button>
                </div>
            </section>
        </main>

        <footer class="footer">
            <button type="button" id="close-app-btn" class="btn btn-text">–ó–∞–∫—Ä—ã—Ç—å</button>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
